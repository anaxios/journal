package Journal;

use Moose;
use namespace::autoclean;

has dir => (
    is => 'ro',
    default => sub { $ENV{INTERSTITIAL_JOURNAL} || './interstitial_journal' }
);

has entries => (
    is => 'ro',
    lazy => 1,
    builder => '_collate_pages'
);

sub _collate_pages {
    my $self = shift;
    opendir(my $dh, $self->{dir}) or die $!;
    my @files = grep {/\.md$/} readdir($dh);
    closedir($dh);
    return \@files;
}

__PACKAGE__->meta->make_immutable;
